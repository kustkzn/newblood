## Art_gallery

  
### Описание

> Автор: [kustkzn]
Сервис представляет собой выставку современного искусства, с проверкой контента с помощью нейросети.
(пока на них не ответят)


### Атака

При анализе исходного кода видим, что фотография по ссылке скачивается дважды, для проверки и для загрузки.
Таким образом мы можем поменять файл во время проверки (TOCTOU), тем более у сервиса пауза между скачиваниями.

Решение представленно в [`script.py`](./script.py)

safe.png-картинка проходящая проверку, bad.png-сообщение 18+

### Защита

Зная узявимость, все что нам необходимо это убрать второе скачивание, вместо этого перемещать уже скачанный файл.

Решение представлено в [`patch.diff`](./patch.diff)